---
title: Web Browser 01) HTTP 리퀘스트 메시지 작성하기
categories: 1%Network
tags: 
toc: true
toc_sticky: true
---

이 포스트는 Tsutomu tone의 <성공과 실패를 결정하는 1%의 네트워크 원리(성안당)> 내용을 바탕으로 공부한 내용을 정리한 것입니다. 

# **0. Intro**

**-** www.naver.com에서 www는 웹 서버에 붙인 이름이다.

**-** Worle Wide Web은 프로토콜을 나타내는 것이 아니라 웹을 설계한 사람이 최초로 만든 브라우저 겸 HTML 편지기에 붙였던 이름이다.

**-** .com, .net, .org 와 같이 등록 대상이 한정되어 있지 않은 도메인명은 개인도 취득할 수 있다. 

**-** 브라우저를 비롯한 네트워크 애플리케이션은 네터워크를 제어하는 기능이 없다. 자체에서 네트워크를 제어하는 것이 아니라 OS에 요청하여 네트워크를 제어하게 된다. 

<br/>

# **1. URL 입력하기**

브라우저는 웹 서버에 액세스하는 클라이언트로서 사용하는 경우가 많지만, 사실 FTP, 메일 등의 클라이언트 기능도 가지고 있는 복합적 클라이언트 소프트웨어이다. 이 중 어떤 기능을 이용해 데이터에 엑세스하면 좋을 지 판단하기 위해 맨 앞에 있는 문자열(http:, ftp:, mailto: 등)을 통해 액세스 방법을 나타낸다. http일 경우 HTTP 라는 프로토콜을, ftp일 경우 FTP 라는 프로토콜을 사용하는 것이다.

URL 앞에 올 수 있는 대표적인 형식으로는 httl, ftl, file, mailto, news 등이 있는데 액세스 대상에 따라 뒤에 오는 내용도 달라진다. 예를 들어 웹 서버, FTP 서버에 접근하는 경우 서버의 도메인명이나 파일의 경로명을 URL에 포함시키며, 메일의 경우 상대의 메일 주소를 포함시킨다. 또 필요에 따라 사용자 이름, 패스워드, 서버측 포트 번호 등을 포함하기도 한다. 

URL을 입력하고 나면 브라우저는 request 메시지를 작성하기 위해 URL을 해독한다. URL을 해독하면 어디에 액세스 해야 하는지 판명이 나는데, 그러면 적절한 프로토콜을 사용해 해당 서버에 액세스 하게 된다. 필요한 데이터를 읽어온 후 레이아웃을 정하여 화면에 표시하는 상태로 전체 동작을 조정하는 것은 브라우저의 역할이다. 

<br/>

# **2. HTTP 메시지 만들기**

## **1) HTTP의 기본 개념**

HTTP 프로토콜은 클라이언트와 서버가 주고받는 메시지의 내용, 순서 등을 정한 것이다. 클라이언트에서 서버로 request 메시지를 보내게 되는데, request 메시지는 "무엇을" "어떻게" 하겠다는 내용을 포함한다. 이때 "무엇을"에 해당하는 것, 즉 목표로하는 액세스 대상을 통칭하여 URI라고 한다. "어떻게"에 해당하는 것은 메소드로, 이 메소드에 의해 웹서버에 어떤 동작을 하고 싶은지 전달한다. 

request 메시지가 웹 서버에 도착하면 웹 서버는 그 내용을 해독하여 요청대로 동작하고 결과 데이터를 response 메시지에 저장해 다시 클아이언트에게 보낸다. 이러한 reponse 메시지의 맨 앞에는 실행 결과가 정상 종료되었는지를 나타내는 status code를 포함한다. 클라이언트가 이를 받아 화면에 표시하면 HTTP의 동작이 완료된다.  

## **2) HTTP request 메시지**

![image](https://user-images.githubusercontent.com/96677719/222648865-7005e3d8-dab1-426a-9528-bfc90c7da6ea.png)

브라우저는 HTTP 메시지 포맷에 맞추어 리퀘스트 메시지를 만든다. 먼저 첫번째 행에 있는 request line을 작성하는데, 이 행의 공백을 사이에 두고 차례로 메소드, URI, HTTP 버전에 대한 정보가 들어간다. 그 이후 message header라는 행에 날짜, 데이터의 종류, 언어, 압축 형식, 소프트웨어 명칭과 버전, 데이터 유효기간 등의 정보를 포함하여 적는다. 마지막으로 아무것도 쓰지 않은 공백 행을 하나 두고, 송신할 데이터에 해당하는 메시지 본문을 작성한다. 

이때 request 메시지에 쓰는 URI는 한개만으로 결정되어 있으므로 파일을 한번에 한개씩만 읽을 수 있기 때문에 파일을 따로따로 읽어야 한다. 따라서 응답이 한 문장에 3개의 영상을 포함하고 있다면 문장 파일을 읽는 request, 영상 파일을 읽는 request로 총 4회 request를 보내게 될 것이다. 

## **3) HTTP response 메시지**

![image](https://user-images.githubusercontent.com/96677719/222649199-a688cda9-621d-444b-a115-8e89308b67c4.png)

응답 메시지는 첫번째 행에서 status code와 응답 문구를 작성한다. 응답 메시지가 영상 등을 포함한 경우 문장 안에 영상 파일을 나타내는 태그라는 제어 정보가 포함된다. 그럼 브라우저는 화면에 문장을 표시할 때 태그를 인식하여 적절한 포맷으로 내보낸다. 
