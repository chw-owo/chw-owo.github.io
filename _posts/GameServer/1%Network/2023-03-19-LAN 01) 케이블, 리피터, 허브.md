---
title: LAN 01) 케이블, 리피터, 허브
categories: 1%Network
tags: 
toc: true
toc_sticky: true
---

이 포스트는 Tsutomu tone의 <성공과 실패를 결정하는 1%의 네트워크 원리(성안당)> 내용을 바탕으로 공부한 내용을 정리한 것입니다. 

# **0. Intro**

**-** 라우터보다 스위칭 허브가 더 늦게 등장하였다. 

**-** 라우터나 스위칭 허브는 패킷 운반 도중 오류가 생기면 패킷을 복구하지 않고 폐기하고, 이후 OS의 네트워크 제어용 소프트웨어인 프로토콜 스택이 폐기된 패킷을 다시 송신한다. 

**-** 현재 이더넷의 케이블로 사용되는 트위트스 페어 케이블은 미국에서 전화 옥내 배선용으로 사용하던 케이블을 진화시킨 것이다. 최초의 이더넷은 전용 동축 케이블을 사용했으나 전화 배선용 기구나 부재 사용이 편리하다는 이유로 미국 전화용 옥내 배선을 개량한 케이블로 교체되었다. 

<br/>

# **1. LAN의 구성과 패킷**

컴퓨터에서 송신된 패킷은 허브, 라우터 등의 중계 장치에 의해 목적지로 전송된다. 대략적인 LAN의 구조는 클라이언트에서 가까운 순으로 리피터 허브 - 스위칭 허브 - 라우터 - 인터넷 접속용 라우터로 이루어져 있으며 그 밖에서는 엑세스 회선을 통해 인터넷과 연결된다. 단일 기능의 여러 기기를 저렇게 연결하는 경우는 많지 않고 실제로는 리피터 허브나 스위칭 허브가 내장된 라우터를 사용하는 경우가 더 많다. 이 과정에서 패킷 헤더의 제어 정보와 중계 장치 내부의 표로 목적지를 판단할 뿐 패킷의 데이터 부분은 확인하지 않는다. 

<br/>

# **2. LAN 케이블**

LAN 어댑터의 PHY(MAU) 회로에서 전기 신호로 바뀐 패킷은 커넥터를 통해 트위스트 페어 케이블로 들어가며, 이때 전기 신호는 +- 전압의 연속된 형태로 이루어져있다. 커넥터에 있는 두개의 핀에서 케이블로 신호가 흐르며 그 후 신호는 케이블을 타고 리피터 허브의 커넥터에 도착한다. 

![image](https://user-images.githubusercontent.com/96677719/226089512-0c6b1dd0-e86a-4d93-aa04-420a29d76b41.png)

송출한 신호는 신호가 약해진 상태로 도착하는 경우가 많으며 케이블의 길이가 길어질 수록 더 약해진다. 주파수가 높을 수록 에너지가 떨어지는 비율이 높아지는데, 전압이 급격히 변화하는 구간은 주파수가 높기 때문에 위 그림처럼 각이 뭉개지게 된다. 거기에 케이블 주의에서 발생하는 전자파로 인해 잡음이 더 해지면 신호가 더 심하게 변형된다. 이런 현상을 줄이기 위해 트위스트 페어 케이블을 사용한다.

우선 형광등, 모니터와 같이 케이블 외부에서 오는 전자파는 선을 꼬는 것을 통해 어느정도 막을 수 있다. 신호선은 금속으로 만들어져 있으므로 전자파가 닿으면 전자파 진행 방향의 오른쪽으로 전류가 생기며 이 전류가 파형을 무너뜨리는 요인이 된다. 그런데 신호선을 마주 꼬면 형태가 나선형이 되면서 꼰 옆의 선에서 전류 방향이 반대가 된다. 그 결과 잡음에서 생긴 전류가 서로 상쇄되어 잡음에 의한 전류가 약해진다. 

또, 케이블 안의 인접한 신호선에서 신호에 의해 생기는 전자파도 다른 신호선에 대한 잡음이 되는데 이러한 잡음에 의한 영향을 크로스 토크라고 한다. 케이블을 꼬는 간격은 모두 같은 게 아니라 약간씩 다른데, 이 간격에 따라 어떤 부분은 플러스 신호에, 어떤 부분은 마이너스 신호에 가까워진다. 그러면 두 영역에서 잡음의 영향이 반대가 되므로 균형이 잡히며 잡음 영향이 줄어든다. 

이 외에도 신호선간 거리 유지를 위해 구분판을 넣거나, 금속성의 실드 피복을 입히는 등의 방법을 사용한다. 

<br/>

# **3. 리피터 허브**

리피터 허브의 커넥터 안쪽에는 LAN 어댑터의 PHY(MAU)와 역할이 같은 회로가 있는데, 이는 커넥터에서 직접 신호를 받는 대신 송신 단자, 수신 단자를 경유하여 신호를 받도록 한다. 이를 통해 한쪽의 송신이 상대의 수신에 연결되어 있는 신호도 송수신 할 수 있게 된다. 리피터 허브에서 PHY(MAU) 회로 수신부에 도달한 신호는 리피터 회로로 들어가서 리피터 허브 커넥터 부분에 신호를 뿌린다. 그리고 이 신호는 리피터 허브에 접속한 전체 기기에 도달한다. 

위 과정을 통해 리피터 허브는 신호가 도착했을 때 LAN 전체에 그 신호를 퍼뜨린다. 신호를 수신한 기기들은 수신처 MAC 주소를 조사하여 자신이 아닐 경우 신호를 무시, 맞을 경우 수신한다. 리피터 회로의 기본은 이처럼 신호를 전달하는 것이므로 잡음으로 변형된 신호도 그대로 전달한다. 훼손된 신호는 상대 기기에 도착하여 FCS를 검사할 때 판명되며, TCP 담당 부분에 의해 재송신 될 것이다. 최근에는 신호의 파형을 다듬는 제품도 있지만 기본 기능은 송출에 있다. 

추가적으로, 리피터 허브 커넥터에는 MDI/MDI-X 스위치가 붙어있는데 MDI는 커넥터와 신호 송수신 회로를 직접 결선하는 것을, MDI-X는 교차하여 결선하는 것을 나타낸다. 일반적으로는 MDI-X로 되어있기 때문에 허브끼리 접속할 때는 한쪽을 MDI로 설정해야 한다. 간혹 전환 스위치가 없고 MDI-X만 되는 경우엔 크로스 케이블로 허브를 연결해야 한다. 또, 크로스 케이블은 PC의 LAN 어댑터끼리 연결할 때도 한쪽의 송신과 한쪽의 수신을 연결하여 신호를 송수신할 수 있도록 돕는다.