---
title: Procademy, Q2, 14) Network - L7 프로토콜, 
categories: ProcademyReview
tags: 
toc: true
toc_sticky: true
---

이 포스트는 프로카데미 (게임 서버 아카데미) 수업을 바탕으로 공부한 내용을 정리한 것입니다. 

# **1. L7 프로토콜**

L7 프로토콜의 헤더에는 우선 필수적으로 페이로드 길이와 타입이 들어간다. 또, 추가적으로 체크섬을 넣기도 하는데, 이는 악의적 조작을 감지하기 위한 안전장치 혹은 암호화에 대한 검증 용도로 사용된다. 그러나 암호화를 해도 패킷을 그대로 복사해서 여러번 다시 보내는 매크로를 만들어 악용할 수 있다. 이걸 막기 위해서는 한번 쓴 메시지는 두번 사용하지 못하도록 시간값 혹은 매번 변하는 고유 번호 값을 헤더에 넣어서 비교해야 한다.  

흔하진 않지만 맨 앞에 특정 값을 넣어서 쓰레기 패킷을 거를 수 있다. 맨 앞에 len이 오면 그 크기만큼 메시지를 기다리며 낭비가 생기므로 이를 막기 위한 것이나, 크게 의미 있는 작업은 아니다. 이러한 프로토콜 값은 보안을 위해 일주일에 한번 정도의 간격으로 변경해야 한다. 같은 맥락에서 전역 변수 위치 등도 비슷한 간격으로 바꾸어 악의적인 분석에 혼란을 준다. 단, PC 온라인 게임과 달리 모바일 게임의 경우, 플레이스토어에 반영되기까지 시간이 걸리므로 버전별로 분기처리를 하는 등의 방법으로 하위 호환성을 보장해야한다. 
