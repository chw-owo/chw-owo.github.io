---
title: C++, STL 3) Deque
categories: Cpp
tags: 
toc: true
toc_sticky: true
---

이 포스트는 Rookiss님의 \<C++과 언리얼로 만드는 MMORPG 게임 개발 시리즈 Part1: C++ 프로그래밍 입문> 수업을 바탕으로 공부한 내용을 정리한 것입니다. 
## **1. Deque의 동작 원리**

Deque, Double-Ended-Queue의 약자로, 양방향 큐로 번역된다. vector와 list의 중간 즈음에 있는 듯한 특징을 갖고 있다.

Vector처럼 미리 공간을 잡아두고, 그 공간이 가득 찰 경우 다시 공간을 늘리는 방식으로 동작한다. 단, Vector는 연속된 공간을 잡아서 기존 값을 복사, 이동시키는 반면 Deque는 연속되지 않은 별개의 공간에 새로운 공간을 잡고 이후 값들을 추가한다. vector와 마찬가지로 배열 기반으로 동작하되, 메모리 할당 정책이 다르기 때문에 데이터를 복사, 이동하는데 들었던 비용을 절약하는 동시에 연속된 배열로 활용할 수 있다. 

```c++
using namespace std;
#include<deque>

int main()
{
    deque<int> dq;
    return 0;
}
```
위와 같이 선언한다. 

<br/>

## **2. Deque 문법**

**1) 접근**

**-접근**

```c++
int front = dq.front();
int back = dq.back();
```
front(), back()을 이용하여 시작 부분, 끝 부분의 값에 접근할 수 있다. 

<br/>

**-임의 접근** 

```c++
int dq03 = dq[3];
```
연속된 메모리를 차지하기 때문에 vector처럼 임의 접근 역시 가능하다. 내부적으로 보면 deque iterator를 이용해 임의 접근이 이루어진다. 살펴보면 offset(_Myoff)을 이용해 몇번째 블록에 자리잡고 있는지 구한 다음, 그 안에서 몇 번째로 위치하는지 계산하는 것을 알 수 있다. 

<br/>

**2) 삽입/ 삭제**

**- 중간 삽입/ 삭제**

비록 vector처럼 모든 걸 복사, 이동해야 하는 형태는 아니지만, deque 역시 일부는 연속 형태로 존재하다보니 중간에 삽입, 삭제 할 경우 뒤에 있는 일정 영역을 모두 복사, 이동해야 하게 된다. 이 과정이 비효율적으로 동작하기 때문에 이와 관련된 별도의 명령어가 없다.  

<br/>

**- 처음 삽입/ 삭제**

```c++
dq.push_front(10);
dq.pop_front();
```
앞 부분에서 삽입/삭제 하는 명령어가 있다. 앞 부분에 삽입한다고 했을 때 첫번째 블록을 늘리는 것은 상대적으로 쉽기 때문에, vector에서 이후에 있는 모든 데이터를 복사 이동해야 하는 것에 비해 훨씬 효율적이다. 이는 양방향 큐의 대표적인 장점이다. 

<br/>

**- 끝 삽입/ 삭제**

```c++
dq.push_back(10);
dq.pop_back();
```
끝 부분에서 삽입하는 명령어는 vector와 동일하다.

<br/>

## **출처**

[C++과 언리얼로 만드는 MMORPG 게임 개발 시리즈] Part1: C++ 프로그래밍 입문, Rookiss
