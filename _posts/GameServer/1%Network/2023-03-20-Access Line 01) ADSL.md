---
title: Access Line 01) ADSL
categories: 1%Network
tags: 
toc: true
toc_sticky: true
---

이 포스트는 Tsutomu tone의 <성공과 실패를 결정하는 1%의 네트워크 원리(성안당)> 내용을 바탕으로 공부한 내용을 정리한 것입니다. 

# **0. Intro**

**-** 패킷을 이용한 최초의 네트워크는 인터넷의 전신인 ARPANET이다. 인터넷은 40년 가까운 역사를 가진 가장 오래된 패킷 네트워크이다. 

**-** ADSL은 전화국까지 가설된 케이블의 요금이 전화 요금에 포함되어 있어서 인터넷 요금이 낮아질 수 있다. 반대로 광섬유는 케이블 요금이 인터넷 요금에 포함되어 있어서 광섬유를 이용할 경우 전화 요금은 저렴해지고 인터넷 요금은 비싸진다. 

**-** 전기나 광 모두 신호가 전달되는 속도는 유사하지만, 전기 신호의 경우 통신 속도를 빠르게 하면 감쇠율이 높아져서 상대적으로 통신 속도가 저속이다. 반면 광신호는 통신 속도를 높여도 감쇠율이 높아지지 않으며 전기적 잡음의 영향을 받지 않아서 고속으로 사용할 수 있다. 

<br/>

# **1. 인터넷과 엑세스 회선**

인터넷은 전 세계에 걸쳐있는 거대한 시스템이지만 패킷을 중계하는 기본적인 구조나 동작은 회사의 네트워크와 유사하다. 스위칭 허브, 라우터로 패킷을 중계하면 패킷은 목적지 서버를 향해 나아가는데, 이때 인터넷 접속용 라우터를 경유하면 인터넷으로 나가게 된다. 그러나 라우터에서 패킷의 중계 대상을 제어하는 부분이 차이가 난다. 경로표에 정보를 등록하는 과정에서 너무 많은 정보가 시시각각으로 변화하기 때문에 일반적인 사내 네트워크와는 다른 구조를 채택한다. 

인터넷 접속용 라우터의 패킷 중계 동작도 이더넷의 라우터와 동일하게 수신처 IP 주소와 경로표를 대조하여 이루어진다. 그러나 송신 동작은 조금 다르게 진행되는데, 인터넷 접속용 라우터는 이더넷 규칙이 아닌 액세스 회선의 규칙에 따라 송신 동작을 실행한다. 엑세스 회선은 가정, 회사 등의 LAN을 연결하는 통신 회선으로, 일반 가정은 ADSL, FTTH, CATV, 전화 회선, ISDN 등을, 회사는 이에 더해 전용 회선을 액세스 회선으로 사용한다. 

<br/>

# **2. ADSL와 패킷**

ADSL은 금속제 케이블을 이용한 고속 통신 기술의 일종으로 대표적인 액세스 회선이다. ADSL은 사용자로부터 인터넷으로 향하는 상향(업로드)과 인터넷에서 사용자로 향하는 하향(다운로드)의 통신 속도가 서로 다른 특징이 있다. ADSL을 사용할 경우 사용자측 라우터에서 송신된 패킷이 ADSL 모뎀 혹은 전화 케이블을 통해 전화국에 도착하며, ADSL 사업자의 네트워크를 경유하여 프로바이더에 도착한다. 

패킷은 프로바이더로 가는 동안 여러 형태로 모습을 바꾼다. 인터넷 접속용 라우터와 ADSL 모뎀이 이더넷으로 연결된 경우 이더넷 규칙에 따라 송신을 실행하므로 송신 동작은 달라지지 않는다. 단, 이더넷의 헤더가 액세스 회선 사업자에 따라 변형되며, MAC 헤더, PPPoE 헤더, PPP라는 3개의 헤더가 붙는다. 이때 PPP, Point to Point Protocol은 전화 회선이나 ISDN 통신회선을 사용할 때 쓰는 규칙을 의미한다.

인터넷 접속용 라우터가 패킷을 ADSL 모뎀으로 송신하면, ADSL 모뎀은 패킷을 작게 분할하여 셀 단위로 저장한다. 셀은 5byte의 헤더와 48byte의 데이터로 이루어진 데이터 덩어리로, ATM에도 이 단위가 사용된다. 셀을 사용하는 것은 개발, 설비 투자 비용을 고려한 것이며 기술적으로 반드시 분할해야 하는 것은 아니다. 실제로 셀을 사용하지 않는 ADSL 모뎀 사용 사업자도 존재한다.  

# **3. ADSL와 신호 변조**

ADSL은 셀을 신호로 변환하여 전송하는데, 이때 사각형 신호 대신 다른 기술을 사용한다. 사각형 신호는 파형이 뭉개지기 쉽고, 거리가 멀어질 수록 오류가 잘 생기며, 넓은 범위의 주파수가 포함되어 있기 때문에 잡음 제어가 어렵다. 따라서 ADSL 모뎀은 정현파 합성 신호에 0, 1의 bit 값을 대응시키는 변조 기술을 사용한다. 변조 기술에는 몇가지 방식이 있는데 ADSL은 위상 변조와 진폭 변조를 결합한 직교 진폭 변조를 사용한다. 

위상 변조는 신호 위상에 bit를 대응시키는 방법이다. 모뎀이 만드는 신호는 일정 주기로 변화하는 파의 일종으로 순환하는 주기의 시작점에 따라 모양이 다르다는 성질이 있다. 이때 파는 1주기에 원래대로 돌아오므로 원에 이를 적용해 0-360도 각도를 나타낼 수 있다. 이 각도를 위상이라고 하며, 이 각도에 0, 1을 대응시키는 것이다. 각도 단계를 세분화 하면 대응 bit 수를 늘려 고속화할 수 있으나, 각도가 가까워지면 판별이 어려워져 오류가 발생하기 쉬워진다. 

진폭 변조 방식은 신호의 진폭 크기에 0, 1을 대응시키는 방법이다. 예를 들어 진폭을 00, 01, 10, 11과 같이 4단계로 나타내는 식이다. 단계를 늘리면 bit수를 늘려 고속화할 수 있지만 잡음의 영향으로 파형이 변형되면 수신측에서 인접 단계와 오인할 수 있다. 직교 진폭 변조는 이 둘을 결합한 것으로, 신호의 진폭과 위상에 각각 1bit를 대응해 한파가 2bit 분의 데이터를 표현할 수 있게끔 만들어서 속도를 높인 것이다. 

이때 신호를 단일 주파수의 파로 한정할 필요는 없다. 서로 다른 파를 합성한 뒤 필터 회로로 추출할 수도 있기 때문에, 이를 이용하면 여러 주파수의 파를 합성하여 신호로 사용할 수 있다. 이 경우 대응시키는 비트 수는 사용하는 파의 수를 곱한 것만큼 증가할 것이다. ADSL은 이 성질을 이용해 고속화를 하고 있으며 잡음이 없는 주파수에는 다수의 비트를, 있는 주파수에는 소수의 비트를 대응시킨다. 

업로드 속도와 다운로드 속도에 차이가 나는 것도 이 때문이다. 업로드에는 26개의 파를, 다운로드에는 95-223개의 파를 사용하는데, 이는 다운로드에 사용하는 높은 주파수의 파가 감쇠가 크고 잡음의 영향을 받기 쉽기 때문이다. 또, 회선 특성은 회선마다 다르기 때문에 모델의 전원을 공급할 때 시험 신호를 보내서 회선의 상태를 조사, 사용할 파의 수를 판단한다. 이것을 트레이닝이라 부르며 이 과정이 몇초에서 수십초 정도 걸린다. 

<br/>

# **3. 스플리터**

전기 신호는 스플리터 장치에 들어가고, 여기서 전화의 음성 신호와 섞여 전화 회선에 함께 흘러가게 된다. ADSL 모뎀 내부에 불필요한 주파수 차단 기능이 이미 있기 때문에 이때는 스플리터가 신호를 그대로 흘리기만 한다. 반대로 전화 회선에서 신호가 흘러들어올 때는 ADSL의 신호가 전화 음성을 듣기 어렵게 만들 수 있으므로 스플리터가 ADSL의 높은 주파수를 차단하여 전화기에 흐르는 신호를 보호한다. 

스플리터는 전화기가 ADSL에 끼치는 영향을 방지하기도 하는데, 스플리터가 없으면 수화기를 들고 회신을 접속한 상태와 수화기를 놓고 회선을 끊은 상태에서 신호를 전달하는 쪽이 달라진다. 수화기를 들면 회선이 연결 상태가 되어 그곳으로 신호가 흐르며, 신호 전달 방향에 따라 잡음 등의 성질이 변하기 때문에 트레이닝을 다시 실행해야 되는 것이다. 스플리터는 이러한 문제도 함께 방지한다. 

<br/>

# **4. 케이블**

스플리터를 통과하고 나면 차례로 전화 케이블을 꽂은 모듈형 커넥터, 옥내 배선, IDF와 MDF, 보안기가 나온다. 이후에는 신호가 0.3~0.9mm 굵기의 금속으로 만들어진 전화 케이블로 들어가는데, 이 케이블은 도중에 금속 파이프를 타고 지하로 들어간다. 이를 궤선점이라고 하며, 전화국에 어느 정도 가까운 곳에서 여러 개의 지하 케이블들이 매설된 지하도를 동도라고 한다. 동도를 통해 전화국에 들어간 케이블은 전화국의 MDF에 하나씩 연결된다. 

신호는 전화 케이블을 통과하며 여러 잡음의 영향을 받는다. 특히 전화 케이블은 ADSL의 높은 주파수를 가정하고 만든 것이 아니기 때문에 이더넷의 트위스트 페어 케이블보다 영향을 많이 받는다. 하지만 한개의 사각형 신호가 흐르던 트위스트 페어 케이블와 달리, ADSL은 다수의 주파수로 나누어져서 잡음과 주파수가 겹치는 신호만 영향을 받는다. 즉, 사용할 수 있는 신호 수가 감소하여 속도가 저하될 뿐 아예 읽지 못하게 되지는 않는다. 

<br/>

# **5. DSLAM과 BAS**

전화국에 도착한 신호는 배선반과 스플리터를 통과하여 DSLAM, DSL Access Multiplexer에 도착하고, 이후 DSLAM이 전기 신호를 셀로 복원된다. 복원 기능은 ADSL의 모뎀과 동일하지만 DSLAM을 사용하면 다수의 ADSL 모뎀이 처리할 일을 한번에 처리할 수 있다. 또, ADSL은 이더넷 인터페이스를 가지고 있어서 라우터, PC와 대화할 때 이더넷 패킷을 송수신하는 반면, DSLAM은 ATM 인터페이스를 가진 것이 대부분이라 패킷을 셀 형태 그대로 후방의 라우터와 주고받게 된다. 

DSLAM을 나온 셀은 BAS, Broadband Access Server라는 패킷 중계 장치에 도착한다. BAS도 DSLAM 같은 ATM 인터페이스가 있어서 이를 통해 셀을 수신하며, 수신한 셀을 원래의 패킷으로 복원하면 BAS의 동작이 끝난다. 그럼 BAS를 위해 필요했던 MAC 헤더, PPPoE 헤더는 버리고 PPP 헤더 이후 부분만 추출, 터널링용 헤더를 붙여 터널링 출구로 중계한다. 터널링 출구의 터널링용 라우터에 도착하면 이 헤더도 분리하고 IP 패킷을 추출하여 인터넷 내부에 중계하게 된다. 