---
title: Procademy, Q1, 16) Visual Studio Tips
categories: ProcademyReview
tags: 
toc: true
toc_sticky: true
---

이 포스트는 프로카데미 (게임 서버 아카데미) 수업을 바탕으로 공부한 내용을 정리한 것입니다. 

# **1. 중단점**

디버그 - 창 - 중단점 을 활성화하면 중단점 목록이 뜬다. 이 중단점 목록에서 비활성화 할 경우 위치는 잡아두되 break는 안할 수 있다.

중단점 - 새로 만들기 - 데이터 중단점을 걸 수 있다. 이는 특정 메모리의 값(주소, 변수 주소)의 변화를 실시간 감지하는 중단점으로, 프로그램이 실행된 상태에서 확인할 수 있기에 어디선가 breakpoint를 걸고 해야 한다. 이 경우 해당 변수가 변화할 때마다 데이터 중단점 적중 신호가 뜬다. 동적할당으로 변수 위치가 변하는 상황, 한번 실행이 오래 걸리는 대규모 프로젝트 상황 등에는 사용하기 힘들지만 간단한 상황에서는 유용하게 사용할 수 있다. 

또, 반복문 안에 breakpoint를 잡으면 조건과 작업을 선택할 수 있다. 이때 작업을 선택하면 원이 아니라 마름모가 되는데, 이 상태에서 작업 - 출력 창 메시지 표시 입력 - 코드 실행 계속 활성화를 하면 멈추는 중단점이 아니라 출력 창에 출력하는 중단점이 된다. 속도가 느리다는 단점이 있지만, 간단한 디버깅 용으로는 괜찮다.

마지막으로, 조건을 선택하면 조건식, 적중 횟수, 필터를 선택할 수 있다. 조건식의 경우 입력한 조건과 일치하면 중단하게 된다. 물론 코드에서 if로 확인하는 게 더 빠르지만 코드를 수정할 수 없는 경우엔 유용하다.

```c++
OutputDebugString(“HEYYY\n”);
```
이는 출력 창에 String을 출력해주는 코드로, 코드를 수정할 수 있다면 if 문과 함께 위 함수를 사용하는 것이 중단점보다 더 빠르다. 가변인자라 포맷 지정은 할 수 없다. 

# **2. 디버깅 시 팁**

버그가 생겼을 때 껐다 켜지 말고 디버그 - 프로세스 연결을 선택하면 디버깅 상태(F5)로 전환할 수 있다. 무한 루프에 빠졌을 때도, 디버그 모드 켠 상태로 일시정지 해서 
디스 어셈블리, 메모리를 살펴볼 수 있다. 단, 실행 시점에 만들어진 pdb가 있어야 소스코드 맵핑을 통한 디버깅이 가능하다. 이게 안될 경우 디스어셈블리를 통한 디버깅만 가능하게 된다. 참고로 현재 visual studio에서 돌아가고 있는 프로젝트 말고 디버깅 기능이 깔려있는 다른 프로세스에 연결하여 디버깅을 할 수도 있다. 

# **3. Visual studio와 DLL**

프로젝트 속성 - C/C++ - 코드 생성 - 런타임 라이브러리

만약 dll을 사용하고 싶지 않다면 여기서 해제할 수도 있다. dll이 들어간 것을 사용하면 런타임 라이브러리를 dll로 로드하게 된다. dll은 겹치는 Library을 여러번 로드하여 메모리 낭비가 생기는 것을 막기 위해 존재하며, 동일한 dll을 여러 프로세스가 사용한다면 이들은 따로 로드하는 대신 한 dll을 공유한다. 해제할 경우 dll 없이도 단독 실행이 가능하다는 장점이 있는 반면 설정할 경우 이것저것 설치해야 되는 대신 용량이 줄어든다.

호출 스택을 확인해보면 정적 링크일 때는 외부 함수가 내 파일 내부에 있는 것처럼 뜨고 동적 링크일 때는 외부에 있는 것으로 분리해서 띄워준다. 만약 코드를 분석하여 뚫어야 되는 상황이라면, 동적 링크일 때는 내부 로직만 보면 되는 반면 정적 링크일 때는 외부/내부가 구분이 안되기 때문에 훨씬 어려워진다. 이런 보안 상의 이유로 정적 링크를 사용할 수도 있다. 

참고로 dll은 윈도우에서 만들어서 운영체제 차원에서 제공되는 기능으로, visual studio를 설치하면 런타임 라이브러리 dll가 자동으로 설치된다. 그러나 window만 설치한 상황 혹은 옛날 vs를 사용하고 있는 상황에서는 이게 없을 수 있다. 이 경우 동적 링크 하는 실행 파일은 런타임 라이브러리가 없다는 에러가 뜰 텐데, 정적으로 링크하거나 런타임 라이브러리 dll을 깔거나 하면 된다. visual studio 홈페이지를 가보면 dll만 따로 설치할 수 있도록 제공하고 있다. 

