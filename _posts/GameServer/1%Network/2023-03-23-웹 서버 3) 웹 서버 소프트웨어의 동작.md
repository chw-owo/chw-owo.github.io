---
title: 웹 서버 3) 웹 서버 소프트웨어의 동작
categories: 1%Network
tags: 
toc: true
toc_sticky: true
---

이 포스트는 Tsutomu tone의 <성공과 실패를 결정하는 1%의 네트워크 원리(성안당)> 내용을 바탕으로 공부한 내용을 정리한 것입니다. 

# **1. URI의 파일명 변환**

웹 서버의 경우 read에서 받은 데이터 내용이 HTTP 리퀘스트 메시지가 된다. 이 내용은 메소드라는 명령과 데이터 출처를 나타내는 URI 등으로 구성되어 있으며, 이에 맞춰 응답 메시지를 만들고 write으로 반송한다. 이때 URI 경로명의 파일을 그대로 읽으면 웹 서버의 디스크가 무방비 상태로 노출되기 때문에 가상 디렉토리 구조를 사용한다. 즉, URI의 경로명은 가상 디렉토기 구조에서의 경로명이며, 실제로 파일을 읽을 때는 가상 디렉토리와 실제 디렉토리의 대응 관계를 조사, 변환하게 된다. 

URI 파일 내용이 HTML 문서나 화상 데이터인 경우 파일 내용을 그대로 반송하지만, 프로그램 파일 이름인 경우 프로그램을 작동시켜서 출력되는 내용을 반송한다. 이 중 CGI 프로그램 파일 이름이 온 경우 메소드가 GET이면 URI 뒤 내장된 데이터를 추출하여 건네주고, POST면 본문에 내장된 데이터를 추출하여 건네준다. 그러면 작동시킨 프로그램이 출력 데이터를 돌려주고, 이는 HTML 문서 형태로 응답 메시지에 담겨져 반송된다. 출력 데이터 내용은 프로그램이 정하는 것이므로 웹 서버는 이 내용에 대해서는 관여하지 않는다.

<br/>

# **2. 웹 서버의 액세스 제어**

웹 서버는 리퀘스트에서 데이터 출처를 판단하고, 데이터를 얻어 반송하는 것이 기본 동작이다. 이에 더해 사전에 조건을 설정해두고 동작을 금지 혹은 실행할 수 있는데, 이 기능을 액세스 제어라고 한다. 여기에는 주로 클라이언트의 주소, 도메인명, 이름과 패스워드를 조건으로 사용한다. 

IP 주소기 조건일 경우 accept했을 때 얻는 클라의 IP 주소를 점검한다. 도메인명일 경우 DNS 서버에 IP 주소로 도메인명을 조사하는데, 조회 메시지가 왕래하는 만큼 응답시간이 길어질 수 있다. 이름과 패스워드의 경우 해당 내용을 포함해 리퀘스트를 보내도록 클라에 통지하고, 이 메시지를 받은 브라우저가 이름과 패스워드 입력 화면을 표시한다. 
