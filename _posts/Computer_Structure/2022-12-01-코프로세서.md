---
title: 코프로세서, 데이터, 라이브러리
categories: CS
tags: 
toc: true
toc_sticky: true
---

## 1. 코프로세서

![image](https://user-images.githubusercontent.com/96677719/151902453-40ac9b1d-739e-40ee-a0d1-f818fb60379a.png)


코프로세서는 다른 말로 보조프로세서로, CPU의 기능을 보충하기 위해 사용하는 컴퓨터 프로세서이다. 프로세스 코어에서 행해지던 몇가지 연산을 코프로세서에 위임함으로써 프로세스 코어의 연산 공간을 더 확보할 수 있다. 예를 들자면, 데이터 복사를 담당하는 코프로세서가 있다면 CPU는 DMA에 단순 복사 연산을 모두 맡길 수 있어서 다른 연산을 더 많이 처리할 수 있게 된다. 이렇게 코프로세서를 이용한 복사 방법을 직접 메모리 접근 DMA이라고 한다. 


## 2. 메모리상의 데이터 배치

![image](https://user-images.githubusercontent.com/96677719/151815282-eb60f33a-dbf4-4137-992f-b03f303c452d.png)

Static data, 정적 데이터: 메모리를 차지하는 양이 고정되어 있어서 프로그램 작성시 얼마나 많은 메모리가 필요한지 알 수 있는 것. 주로 스택에 저장된다.

Dynamic data, 동적 데이터: 프로그램 실행 전에 크기를 알 수 없는 데이터. 프로그램이 동작하면서 데이터의 크기가 변한다. 동적 데이터는 정적 데이터가 차지하는 영역 바로 위에 쌓이며 이를 힙이라고 부른다. 

더 많은 데이터를 저장해야 될 떄 스택은 아래로, 힙은 위로 자라난다. 마이크로 컴퓨터는 MMU가 없는 경우가 많기 때문에 이러한 메모리 배치를 자주 볼 수 있다.

MMU가 쓰이는 경우에는 명령, 데이터, 스택이 각기 다른 물리적 메모리 페이지에 맵핑되고 필요에 따라 할당된 크기가 변경된다. 그러나 프로그램이 바라보는 메모리(가상 메모리)는 마찬가지로 위와 같은 배치 형태를 사용한다. 


## 3. 라이브러리와 프로그램 실행

![image](https://user-images.githubusercontent.com/96677719/151815899-bd670c95-5583-453b-991c-35eb9f6c2c8e.png)


라이브러리: 비슷한 연산을 하는 함수들을 한 곳에 모아놓은 것

링커: 실행할 수 있는 프로그램을 만드는 프로그램

정적 링크: 라이브러리를 필요한 함수가 들어있는 파일로 간주하고 프로그램의 나머지 부분과 직접 연결해서 실행 파일을 만드는 방식

동적 링크: 정적 링크를 사용하면 여러 프로그램이 같은 라이브러리를 사용할 때 같은 라이브러리 코드가 여러 실행파일에 반복적으로 들어가며 메모리가 낭비된다. 이를 보완하기 위해 공유 라이브러리를 사용하여 한 라이브러리를 여러 프로그램이 공유할 수 있도록 만드는 방식을 동적 링크라고 한다. 

런타임 라이브러리: 프로그램을 이루는 모든 부분이 하나로 합쳐져서 실행파일을 이룰 때 추가되는 라이브러리. 런타임 라이브러리는 메모리 설정, 즉 스택과 힙 영역을 어떻게 배치할지 그리고 정적 데이터에 위치한 데이터의 초깃값 설정을 책임진다. 프로그램이 실행될 때에도 런타임 라이브러리의 명령어가 제일 먼저 실행되고 프로그램의 진입점 명령어가 실행된다. 

### 출처
한 권으로 읽는 컴퓨터 구조와 프로그래밍, 조너선 스타인하트 지음, 오현석 옮김, 책만, 2021
